define("plugins/downloadfile/1.0.0/downloadfile",["jquery","parsejson","swfobject"],function(a){var b=a("jquery"),c=a("parsejson"),d=a("swfobject"),e={ok:200,error:300,timeout:301};b.extend(mining,{downloadfile:{}});var f={url:seajs.data.base+"plugins/downloadfile/1.0.0/downloadfile.swf",width:"100%",height:"100%",version:"10.0.0"},g={filename:"",opacity:1},h={menu:"false",quality:"high",wmode:"transparent",allowFullScreen:"true",allowScriptAccess:"always"},i=function(a){var c=b.extend({container:"",name:"downloadfile",filedata:"",fileurl:"",filename:"",opacity:1,width:"100%",height:"100%",vars:null,params:null,attrs:null,start:null,success:null,error:null,isdebug:!1},a),e="string"==typeof c.container?b(c.container):c.container;if(mining.utils.isEmpty(e))return void seajs.log("Downloadfile Say:[Error] 缺少必选参数！");var i="downloadfilecontent"+m("downloadfilecontent");e.append('<div id="'+i+'"></div>');var j=b.extend({},f,{width:c.width,height:c.height});c.vars=b.extend({},g,c.vars,{filedata:c.filedata,fileurl:c.fileurl,filename:c.filename,opacity:c.opacity}),c.params=b.extend({},h,c.params),c.attrs=b.extend({},c.attrs,{id:c.name,name:c.name});var k=m(c.attrs.id);0!=k&&(c.attrs={id:c.attrs.id+k,name:c.attrs.name+k}),b.extend(c.vars,{instanceId:c.attrs.id}),mining.downloadfile[c.attrs.id]=c,d.embedSWF(j.url,i,j.width,j.height,j.version,d.installUrl,c.vars,c.params,c.attrs)};window.downloadfileStart=function(a){var c=mining.downloadfile[a.id];mining.utils.isEmpty(c)||mining.utils.isEmpty(c.start)||!b.isFunction(c.start)||c.start.call(this,a)},window.downloadfileSuccess=function(a){var d=mining.downloadfile[a.id],f="";mining.utils.isEmpty(d)||(mining.utils.isEmpty(a.data)||(f=l(c(a.data))),f==e.error||f==e.timeout?downloadfileError(a):!mining.utils.isEmpty(d.success)&&b.isFunction(d.success)&&d.success.call(this,a))},window.downloadfileError=function(a){var c=mining.downloadfile[a.id];mining.utils.isEmpty(c)||mining.utils.isEmpty(c.error)||!b.isFunction(c.error)||c.error.call(this,a)},window.console_log=function(a){op.isdebug&&seajs.log(a)};var j=function(a,b){if(!mining.utils.isEmpty(a)&&!mining.utils.isEmpty(b)){var c=mining.utils.getSwf(a);mining.utils.isEmpty(c)||c.setData(b)}},k=function(a,b){if(!mining.utils.isEmpty(a)&&!mining.utils.isEmpty(b)){var c=mining.utils.getSwf(a);mining.utils.isEmpty(c)||c.setUrl(b)}},l=function(a){return mining.utils.isEmpty(a)||mining.utils.isEmpty(a.statusCode)?e.ok:a.statusCode==e.error?e.error:a.statusCode==e.timeout?e.timeout:e.ok},m=function(a){for(var c=0;1e3>c&&b("#"+a+c).size()>0;)c++;return c};return{init:i,setData:j,setUrl:k}});
